<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"50185433"}),daovoice("update")</script><script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script><link href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Cookie:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/alex.d-blog/css/main.css?v=6.4.2" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/alex.d-blog/images/logo-180x180.jpg?v=6.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/alex.d-blog/images/favicon-32x32.ico?v=6.4.2"><link rel="icon" type="image/png" sizes="16x16" href="/alex.d-blog/images/favicon-16x16.ico?v=6.4.2"><link rel="mask-icon" href="/alex.d-blog/images/logo.svg?v=6.4.2" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/alex.d-blog/",scheme:"Mist",version:"6.4.2",sidebar:{position:"left",width:320,display:"hide",offset:12,b2t:!1,scrollpercent:!0,onmobile:!0},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本文“Windows系统配置SonarQube本地服务”基础上，简单记录SonarQube Scanner代码分析工具的配置及使用。"><meta name="keywords" content="Windows,SonarQube,代码质量,代码分析,SonarQube Sanner,Maven"><meta property="og:type" content="article"><meta property="og:title" content="Windows下配置SonarQube Scanner检测分析代码"><meta property="og:url" content="http://yoursite.com/posts/57e324c1/index.html"><meta property="og:site_name" content="Alex.D&#39;s Bolg"><meta property="og:description" content="本文“Windows系统配置SonarQube本地服务”基础上，简单记录SonarQube Scanner代码分析工具的配置及使用。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-SonarQube_Architecture.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_path.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_cmd_version.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_sonar.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_sonar_download.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_sonar_success.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-idea_edit_config.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-idea_edit_config_2.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-idea_edit_config_3.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_download.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_dic.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_path.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_version.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_install.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_warning.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_disable_binding_sonarqube_server_2.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_disable_binding_sonarqube_server_1.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_analyze.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_analyze_1.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_analyze_2.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_setting_1.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_setting_2.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_setting_3.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_binding_project.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarqube_token.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarqube_analysis.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_error_0_deal.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_error_0_deal_2.png"><meta property="og:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarjava_error_1.png"><meta property="og:updated_time" content="2018-09-08T17:54:42.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Windows下配置SonarQube Scanner检测分析代码"><meta name="twitter:description" content="本文“Windows系统配置SonarQube本地服务”基础上，简单记录SonarQube Scanner代码分析工具的配置及使用。"><meta name="twitter:image" content="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-SonarQube_Architecture.png"><link rel="alternate" href="/alex.d-blog/rss.xml" title="Alex.D's Bolg" type="application/atom+xml"><link rel="canonical" href="http://yoursite.com/posts/57e324c1/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>Windows下配置SonarQube Scanner检测分析代码 | Alex.D's Bolg</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3a07652f23a7df84dd82ef48b0a358e1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/alex.d-blog/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Alex.D's Bolg</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Don't trouble trouble until trouble troubles you.</h1></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/alex.d-blog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/alex.d-blog/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class="badge">40</span></a></li><li class="menu-item menu-item-categories"><a href="/alex.d-blog/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类<span class="badge">16</span></a></li><li class="menu-item menu-item-archives"><a href="/alex.d-blog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档<span class="badge">27</span></a></li><li class="menu-item menu-item-about"><a href="/alex.d-blog/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-commonweal"><a href="/alex.d-blog/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header> <a href="https://github.com/anyer" class="github-corner" target="_blank" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#222;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/alex.d-blog/posts/57e324c1/"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Alex.D"><meta itemprop="description" content="Alex.D 个人博客，记录和分享工作经验、学习心得等"><meta itemprop="image" content="/alex.d-blog/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Alex.D's Bolg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Windows下配置SonarQube Scanner检测分析代码</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-09-09 01:54:42" itemprop="dateCreated datePublished" datetime="2018-09-09T01:54:42+08:00">2018-09-09</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/alex.d-blog/categories/代码质量/" itemprop="url" rel="index"><span itemprop="name">代码质量</span></a></span> ， <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/alex.d-blog/categories/代码质量/SonarQube/" itemprop="url" rel="index"><span itemprop="name">SonarQube</span></a></span></span> <span id="/alex.d-blog/posts/57e324c1/" class="leancloud_visitors" data-flag-title="Windows下配置SonarQube Scanner检测分析代码"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span title="本文字数">5.1k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">5 分钟</span></div><div class="post-description">本文“Windows系统配置SonarQube本地服务”基础上，简单记录SonarQube Scanner代码分析工具的配置及使用。</div></div></header><div class="post-body" itemprop="articleBody"><h1 id="Windows下配置SonarQube-Scanner检测分析代码"><a href="#Windows下配置SonarQube-Scanner检测分析代码" class="headerlink" title="Windows下配置SonarQube Scanner检测分析代码"></a>Windows下配置SonarQube Scanner检测分析代码</h1><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-SonarQube_Architecture.png" alt="SonarQube 架构"></p><p>首先这里继续引用下SonarQube的架构图，在上文中记录了Windows下SonarQube服务及数据库环境的配置，本文则在此基础上，简单记录SonarQube Scanner代码分析工具的配置及使用，文中发现有问题或疏漏，希望可以得到您的反馈。</p><p>对于SonarQube Scanner这里不做太多介绍了，至于为什么使用SonarQube Scanner，看这里</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner.png" alt="SonarQube 官方文档推荐"></p><p><a href="https://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner" target="_blank" rel="noopener">SonarQube官方文档</a> 推荐使用，更多原因，自行百度了~</p><h2 id="Maven配置SonarQube-Scannar实现代码分析"><a href="#Maven配置SonarQube-Scannar实现代码分析" class="headerlink" title="Maven配置SonarQube Scannar实现代码分析"></a>Maven配置SonarQube Scannar实现代码分析</h2><blockquote><p>此处通过在Maven中配置Sonar Scanner，然后使用 <code>mvn sonar:sonar</code> 命令完成对代码的分析，该方式针对Maven构建项目，Gradle构建的项目未测试，自行尝试。</p></blockquote><h3 id="Maven环境配置"><a href="#Maven环境配置" class="headerlink" title="Maven环境配置"></a>Maven环境配置</h3><p>为了可以使用Maven命令运行Sonar来分析项目代码，首先需要将Maven的bin目录添加到环变量内，如下:</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_path.png" alt="Maven 环境变量"></p><p>配置完成后，在命令行窗口使用命令 <code>mvn -v</code> 查看Maven版本等信息，验证环境变量配置完成</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_cmd_version.png" alt="Maven 命令行查看版本"></p><hr><h3 id="Maven增加SonarQube-Scanner配置"><a href="#Maven增加SonarQube-Scanner配置" class="headerlink" title="Maven增加SonarQube Scanner配置"></a>Maven增加SonarQube Scanner配置</h3><p>首先在 Maven 的 <code>conf</code> 目录下找到Maven的配置文件 <code>settings.xml</code> ，搜索到 <code>&lt;profiles&gt;</code> 节点，在其中添加SonarQube Scanner的配置，如下图:</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">     <span class="comment">&lt;!-- 复制以下内容 --&gt;</span></span><br><span class="line">   </span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>sonar<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 配置 Sonar服务地址，此处为本地服务 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">sonar.host.url</span>&gt;</span></span><br><span class="line">                http://127.0.0.1:9000/</span><br><span class="line">            <span class="tag">&lt;/<span class="name">sonar.host.url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">&lt;!-- 复制以上内容 --&gt;</span></span><br><span class="line">    </span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p><strong>注意：</strong> 若在Maven的 <code>conf</code> 目录下未找到 <code>settings.xml</code> 配置文件，则可以在Maven仓库默认目录 <code>C:\Users\[你登陆账号的用户名]\.m2</code> 下查找。</p></blockquote><hr><h3 id="Maven项目目录执行命令分析"><a href="#Maven项目目录执行命令分析" class="headerlink" title="Maven项目目录执行命令分析"></a>Maven项目目录执行命令分析</h3><p>进入想要检测分析的Maven项目目录，在项目根目录打开命令行，输入命令 <code>mvn sonar:sonar</code></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_sonar.png" alt="Maven Sonar代码扫描检测"></p><p>首次进行代码检测扫描时，会下载SonarQube Scanner相关jar包，类似下图：</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_sonar_download.png" alt="enter description here"></p><p>扫描完成后，会看到 <code>BUILD SUCCESS</code> 的提示，到此代码的检测扫描完成。</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-maven_sonar_success.png" alt="Maven Sonar扫描检测完成"></p><hr><h3 id="IDEA内通过Maven执行SonarQube-Scanner分析"><a href="#IDEA内通过Maven执行SonarQube-Scanner分析" class="headerlink" title="IDEA内通过Maven执行SonarQube Scanner分析"></a>IDEA内通过Maven执行SonarQube Scanner分析</h3><p>下面介绍，在上步操作完成的基础上，怎么在IDEA开发工具内使用使用SonarQube Scanner进行代码检测分析。</p><p>首先IDEA打开需要检测分析的Maven项目，在 <code>Run/Debug Configurations</code> 中，添加一个Maven的运行配置，具体配置如下：</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-idea_edit_config.png" alt="IDEA 打开运行配置"></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-idea_edit_config_2.png" alt="IDEA 添加Maven配置"></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-idea_edit_config_3.png" alt="IDEA Maven配置"></p><hr><p>配置完成后，选择此运行方式，点击运行，控制台可以看到类似上步中命令行窗口的输出内容，等待出现 <code>BUILD SUCCES</code> 的提示字样后，表示代码的检测分析完成，此时可以在SonarQube服务内查看分析结果。此处仅测试IDEA环境，Eclipse等其他IDE开发工具自行测试。</p><hr><h2 id="SonarQube-Scanner配置"><a href="#SonarQube-Scanner配置" class="headerlink" title="SonarQube Scanner配置"></a>SonarQube Scanner配置</h2><p>前面说了Maven使用SonarQube Scanner完成对Maven代码的检测分析，下面记录直接下载的SonarQube Scanner配置及使用。</p><h3 id="SonarQube-Scanner下载"><a href="#SonarQube-Scanner下载" class="headerlink" title="SonarQube Scanner下载"></a>SonarQube Scanner下载</h3><p>可以在<a href="https://jira.sonarsource.com/secure/BrowseProjects.jspa?selectedCategory=all" target="_blank" rel="noopener">此处</a>下载支持各种环境的SonarQube Scanner，根据自己需要进行选择即可。在SonarQube官网<a href="https://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner" target="_blank" rel="noopener">下载</a>对应系统版本的SonarQube Scanner cli，该版本支持命令行模式。</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_download.png" alt="SonarQube Scanner CLI 下载"></p><p>下载完成后，任意目录下解压，目录结构大致如下，目录作用类似SonarQube</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_dic.png" alt="SonarQube Scanner CLI 目录结构"></p><hr><h3 id="SonarQube-Scanner配置-1"><a href="#SonarQube-Scanner配置-1" class="headerlink" title="SonarQube Scanner配置"></a>SonarQube Scanner配置</h3><ul><li><p>配置环境变量（为了可以全局使用SonarQube Scanner）</p><p> <img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_path.png" alt="SonarQube Scanner 环境变量配置"></p><ul><li><p>验证环境变量是否配置成功</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_version.png" alt="SonarQube Scanner 环境变量配置验证"></p></li><li><p>添加检测扫描的项目<br>打开SonarQube Scanner的配置文件（<code>..\sonar-scanner-3.2.0.1227-windows\conf\sonar-scanner.properties</code> ) ，配置如下</p></li></ul><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#----- Default SonarQube server</span></span><br><span class="line"><span class="string">sonar.host.url=http://localhost:9000</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#----- Default source code encoding</span></span><br><span class="line"><span class="string">sonar.sourceEncoding=UTF-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置项目的Key（每个项目唯一的项目键，使用Maven时设置为 &lt;groupId&gt;:&lt;artifactId&gt;）</span></span><br><span class="line"><span class="string">sonar.projectKey=com.codersoft:cms</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置分析的项目在SonarQube服务界面显示的名称</span></span><br><span class="line"><span class="string">sonar.projectName=cms</span></span><br><span class="line"><span class="comment"># 配置分析的项目的版本（使用Maven时取&lt;version&gt;的值）</span></span><br><span class="line"><span class="string">sonar.projectVersion=1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置要分析的项目根目录</span></span><br><span class="line"><span class="string">sonar.projectBaseDir=D:/work/workspace/gitee/cms/rbac/cms</span></span><br><span class="line"><span class="comment"># 配置包含源文件的目录（未设置，则从默认的Maven源代码位置检索）</span></span><br><span class="line"><span class="string">sonar.sources=.</span></span><br></pre></td></tr></table></figure><p>添加完成后，命令行窗口，执行命令 <code>sonar-scanner -Dsonar.java.binaries=.</code> （SonarQube的sonar-java-plugin插件版本大于4.12后，不能直接使用 <code>sonar-scanner</code> 命令，需要提供对应源码的字节码，详情看文末异常问题记录）</p></li></ul><p>更多SonarQube Scanner内容见<a href="https://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner" target="_blank" rel="noopener">SonarQube官网文档</a>， 更多SonarQube配置的分析参数见<a href="https://docs.sonarqube.org/display/SONAR/Analysis+Parameters" target="_blank" rel="noopener">此处</a></p><hr><h2 id="IDEA配置SonarLint插件"><a href="#IDEA配置SonarLint插件" class="headerlink" title="IDEA配置SonarLint插件"></a>IDEA配置SonarLint插件</h2><p>IDEA支持不少用于代码质量检测的插件，如阿里巴巴的代码规范插件、FindBugs等，此处可以尝试使用SonarLint插件。</p><h3 id="SonarLint插件安装"><a href="#SonarLint插件安装" class="headerlink" title="SonarLint插件安装"></a>SonarLint插件安装</h3><p>在IDEA中打开设置界面（ <code>File -&gt; Settings</code> ） , 选择 <code>Plugins</code> 进入IDEA的插件市场搜索 <code>SonarLint</code> 进行安装</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_install.png" alt="enter description here"></p><p>等待下载安装完成后，重启的IDEA中即可完成安装。</p><p>安装完成重启IDEA后，会出现如下提示，此时需要对SonarLint插件进行配置</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_warning.png" alt="IDEA SonarLint未配置提醒"></p><p>安装提示，点击 <code>SonarLint project configuration</code> 进行SonarLint 项目的配置</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_disable_binding_sonarqube_server_2.png" alt="IDEA SonarLint关闭远程服务"></p><p>或在设置中进行配置</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_disable_binding_sonarqube_server_1.png" alt="IDEA SonarLint关闭远程服务绑定"></p><p>此处关闭远端SonarQube Server的绑定，即使用本地SentLint插件默认的代码检测规则。这样就可以在本地环境下使用默认规则进行代码检测分析，可以点击菜单项 <code>Analyze</code> ，找到 <code>Aanlyze all files with SonarLint</code> 的子菜单项</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_analyze.png" alt="IDEA 代码分析菜单项"></p><p>尝试点击此项，来检测分析当前项目的所有文件</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_analyze_1.png" alt="IDEA SonarLint检测分析确认"></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_analyze_2.png" alt="IDEA SonarLint代码分析检测"></p><p>单个文件的检测，可以在想检测文件右键选择 <code>SonarLint</code> 进行检测，具体操作此处不赘述。</p><hr><h3 id="SonarLint插件配置"><a href="#SonarLint插件配置" class="headerlink" title="SonarLint插件配置"></a>SonarLint插件配置</h3><p>SonarQube可以针对项目进行检测规则等设置，要让IDEA中SonarLint插件同步使用SonarQube服务中更新的规则，则需要如下配置</p><ul><li><p>配置SonarQube Server</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_setting_1.png" alt="IDEA SonarLint配置服务"></p><p>支持两种登陆验证方式，此处使用本地SonarQube服务，则使用账号密码登陆（远端项目，可以使用Token验证）</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_setting_2.png" alt="IDEA SonarLint配置服务"></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_setting_3.png" alt="IDEA SonarLint配置服务"></p><ul><li>绑定配置SonarQube服务内的项目，用于同步检测规则</li></ul><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarlint_binding_project.png" alt="IDEA SonarLint绑定远端项目"><br>注意：SonarQube没有服务时，此处无法配置，可以通过SonarQube Scanner或Maven来进行项目代码的检测分析，实现项目的添加。<br>配置完成后，回到服务配置界面，点击更新规则，即可获取SonarQube服务上针对该项目配置的检测规则。</p></li></ul><p>最后，SonarQube的Token，可以在用户设置里进行增删</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarqube_token.png" alt="SonarQube Token生成"></p><hr><h1 id="SonarQube服务内查看分析结果"><a href="#SonarQube服务内查看分析结果" class="headerlink" title="SonarQube服务内查看分析结果"></a>SonarQube服务内查看分析结果</h1><p>完成代码的分析检测后，可以在浏览器访问SonarQube服务地址，此处为本地搭建服务，则访问地址 <code>http:\\localhost:9000</code></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarqube_analysis.png" alt="SonarQube 分析结果"></p><p>可以在Sonar服务管理页面内看到新扫描的Maven项目的分析报告，此时根据需要查看对应内容，不再赘述。</p><hr><h1 id="SonarQube-Scanner异常问题记录"><a href="#SonarQube-Scanner异常问题记录" class="headerlink" title="SonarQube Scanner异常问题记录"></a>SonarQube Scanner异常问题记录</h1><blockquote><p>SonarQube Scanner执行 <code>sonar-scanner</code> 命令时，出现错误时，可以通过执行 <code>sonar-scanner -X</code> 来输出详细错误日志，方便问题的排查。</p></blockquote><h2 id="异常-AnalysisException-Please-provide-compiled-classes-of-your-project-with-sonar-java-binaries-property"><a href="#异常-AnalysisException-Please-provide-compiled-classes-of-your-project-with-sonar-java-binaries-property" class="headerlink" title="异常 AnalysisException: Please provide compiled classes of your project with sonar.java.binaries property"></a>异常 AnalysisException: Please provide compiled classes of your project with sonar.java.binaries property</h2><p>该问题原因见<a href="https://docs.sonarqube.org/display/PLUG/Java+Plugin+and+Bytecode" target="_blank" rel="noopener">官方文档</a></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_error_0_deal.png" alt="SonarQube Java插件和字节码"></p><p>大体意思，自SonarJava 4.12后，不使用Maven或Gradle构建工具来分析代码时，必须手动提供与源代码对应的字节码，否则就会分析失败，并出现该异常提示。</p><p>可以尝试通过以下方式处理：</p><ul><li><p>执行命令修改为 <code>sonar-scanner -Dsonar.java.binaries=.</code></p></li><li><p>或在配置文件内添加下列配置（追加内容在上文基础上进行）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># sonar.sources=.</span><br><span class="line"># 此处配置该项目的子项目的源码文件目录</span><br><span class="line">sonar.sources=./cms-common/src,./cms-dao/src,./cms-service/src,./cms-tester/src,./cms-web/src</span><br><span class="line"></span><br><span class="line"># SonarJava 4.12 以后，不使用Maven等构建工具分析代码，则必须手动提供对应源代码的字节码</span><br><span class="line"># 此处配置该项目的子项目的class字节码文件目录</span><br><span class="line">sonar.java.binaries=./cms-common/target/classes,./cms-dao/target/classes,./cms-service/target/classes,./cms-tester/target/test-classes,./cms-web/target/classes</span><br></pre></td></tr></table></figure></li><li><p><del>下载SonarJava 4.12之前版本的插件，替换现有版本，<a href="https://github.com/SonarSource/sonar-java" target="_blank" rel="noopener">插件源码下载地址</a></del> ，<a href="https://mvnrepository.com/artifact/org.sonarsource.java/sonar-java-plugin" target="_blank" rel="noopener">插件jar包下载地址</a></p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonar_scanner_error_0_deal_2.png" alt="SonarJava各版本下载"></p><p><del>下载完成后，替换 <code>..\sonarqube-6.7.5\extensions\plugins\</code> 目录下的 <code>sonar-java-plugin-xxx.jar</code> （本文SonarQube的SonarJava插件版本为 <code>5.7.0.15470</code>） ，重启SonarQube服务即可。</del></p></li></ul><p>网上很多文章提供第三种方法解决该异常，我下载了 <code>4.10.0.10260</code> 版本的java插件jar包，按照此思路替换插件jar包后，重启服务，如出现下图提示情况</p><p><img src="http://p9uy5dyvc.bkt.clouddn.com/xsj/2018-9-8-sonarjava_error_1.png" alt="SonarJava jar包版本替换后出现的异常"></p><p>且运行 <code>sonar-scanner</code> 命令出现SonarQube服务（本文已经将SonarQube服务配置为系统服务）停止的情况，在尝试清理 <code>c:\user\[你当前登陆计算机的用户名]\.sonar</code> 下的文件全部删除，然后重启服务，依旧出现上文提示，且服务过一段时间也会停止运行。具体原因暂不明确，初步认为是插件版本问题，不知是否还有还是其他问题，未做更多版本测试，本文暂不推荐第三种方法处理，如遇到此情况，且知道解决方案的希望告知，谢谢。</p></div><div><div><div style="text-align:center;color:#ccc;font-size:16px">------ 全文结束<i class="fa fa-thumbs-up"></i> 感谢您的阅读!!! ------</div></div></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"> <img id="wechat_subscriber_qcode" src="/alex.d-blog/images/weixingongzhonghao.png" alt="Alex.D wechat" style="width:200px;max-width:100%"><div></div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/alex.d-blog/images/wechatpay.jpg" alt="Alex.D 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/alex.d-blog/images/alipay.jpg" alt="Alex.D 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> Alex.D</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="http://yoursite.com/posts/57e324c1/" title="Windows下配置SonarQube Scanner检测分析代码">http://yoursite.com/posts/57e324c1/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/alex.d-blog/tags/Windows/" rel="tag"><i class="fa fa-tag"></i> Windows</a><a href="/alex.d-blog/tags/SonarQube/" rel="tag"><i class="fa fa-tag"></i> SonarQube</a><a href="/alex.d-blog/tags/代码质量/" rel="tag"><i class="fa fa-tag"></i> 代码质量</a><a href="/alex.d-blog/tags/代码分析/" rel="tag"><i class="fa fa-tag"></i> 代码分析</a><a href="/alex.d-blog/tags/SonarQube-Sanner/" rel="tag"><i class="fa fa-tag"></i> SonarQube Sanner</a><a href="/alex.d-blog/tags/Maven/" rel="tag"><i class="fa fa-tag"></i> Maven</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/alex.d-blog/posts/9232f8b8/" rel="next" title="Windows系统配置SonarQube本地服务"><i class="fa fa-chevron-left"></i> Windows系统配置SonarQube本地服务</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/alex.d-blog/posts/1d88c15e/" rel="prev" title="Windows下SonarQube与Jenkins环境的配置使用">Windows下SonarQube与Jenkins环境的配置使用<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/alex.d-blog/images/avatar.jpg" alt="Alex.D"><p class="site-author-name" itemprop="name">Alex.D</p><p class="site-description motion-element" itemprop="description">Alex.D 个人博客，记录和分享工作经验、学习心得等</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/alex.d-blog/archives/"><span class="site-state-item-count">27</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/alex.d-blog/categories/index.html"><span class="site-state-item-count">16</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/alex.d-blog/tags/index.html"><span class="site-state-item-count">40</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/alex.d-blog/rss.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://blog.csdn.net/u012995964" target="_blank" title="CSDN" rel="external nofollow"><i class="fa fa-fw fa-link"></i> CSDN</a></span><span class="links-of-author-item"><a href="https://www.jianshu.com/u/059f6f3e5791" target="_blank" title="简书" rel="external nofollow"><i class="fa fa-fw fa-link"></i> 简书</a></span><span class="links-of-author-item"><a href="https://github.com/anyer" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://gitee.com/alex_d" target="_blank" title="Gitee" rel="external nofollow"><i class="fa fa-fw fa-link"></i> Gitee</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow"><img src="/alex.d-blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Windows下配置SonarQube-Scanner检测分析代码"><span class="nav-number">1.</span> <span class="nav-text">Windows下配置SonarQube Scanner检测分析代码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Maven配置SonarQube-Scannar实现代码分析"><span class="nav-number">1.1.</span> <span class="nav-text">Maven配置SonarQube Scannar实现代码分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven环境配置"><span class="nav-number">1.1.1.</span> <span class="nav-text">Maven环境配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven增加SonarQube-Scanner配置"><span class="nav-number">1.1.2.</span> <span class="nav-text">Maven增加SonarQube Scanner配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Maven项目目录执行命令分析"><span class="nav-number">1.1.3.</span> <span class="nav-text">Maven项目目录执行命令分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IDEA内通过Maven执行SonarQube-Scanner分析"><span class="nav-number">1.1.4.</span> <span class="nav-text">IDEA内通过Maven执行SonarQube Scanner分析</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SonarQube-Scanner配置"><span class="nav-number">1.2.</span> <span class="nav-text">SonarQube Scanner配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SonarQube-Scanner下载"><span class="nav-number">1.2.1.</span> <span class="nav-text">SonarQube Scanner下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SonarQube-Scanner配置-1"><span class="nav-number">1.2.2.</span> <span class="nav-text">SonarQube Scanner配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IDEA配置SonarLint插件"><span class="nav-number">1.3.</span> <span class="nav-text">IDEA配置SonarLint插件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SonarLint插件安装"><span class="nav-number">1.3.1.</span> <span class="nav-text">SonarLint插件安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SonarLint插件配置"><span class="nav-number">1.3.2.</span> <span class="nav-text">SonarLint插件配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SonarQube服务内查看分析结果"><span class="nav-number">2.</span> <span class="nav-text">SonarQube服务内查看分析结果</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SonarQube-Scanner异常问题记录"><span class="nav-number">3.</span> <span class="nav-text">SonarQube Scanner异常问题记录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#异常-AnalysisException-Please-provide-compiled-classes-of-your-project-with-sonar-java-binaries-property"><span class="nav-number">3.1.</span> <span class="nav-text">异常 AnalysisException: Please provide compiled classes of your project with sonar.java.binaries property</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2018</span><span class="with-love" id="animate"><i class="fa fa-heartbeat"></i></span> <span class="author" itemprop="copyrightHolder">Alex.D</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">77k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:10</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> 强力驱动 v3.8.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a class="theme-link" target="_blank" rel="external nofollow" href="https://theme-next.org">NexT.Mist</a> v6.4.2</div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="总访客量"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv" title="总访问量"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div><div><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b1f1cb368ef81fb" async="async"></script></div></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/alex.d-blog/lib/three/three.min.js"></script><script type="text/javascript" src="/alex.d-blog/lib/three/three-waves.min.js"></script><script type="text/javascript" src="/alex.d-blog/js/src/utils.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/motion.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/scrollspy.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/post-details.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/bootstrap.js?v=6.4.2"></script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/alex.d-blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.time + 1);
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "bMq5EYdO7g53KqEdWTWkVm7I-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "bMq5EYdO7g53KqEdWTWkVm7I-gzGzoHsz",
                'X-LC-Key': "BVg4Pry8PJsDq6i9g8Iydm5M",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript" src="/alex.d-blog/js/src/js.cookie.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/scroll-cookie.js?v=6.4.2"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/alex.d-blog/js/src/love.js"></script></body></html>