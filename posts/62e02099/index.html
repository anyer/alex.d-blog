<!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"50185433"}),daovoice("update")</script><script src="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/pace.min.js"></script><link href="//cdnjs.cloudflare.com/ajax/libs/pace/1.0.2/themes/blue/pace-theme-minimal.min.css" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="https://fonts.cat.net/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Cookie:300,300italic,400,400italic,700,700italic|Roboto Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="/alex.d-blog/css/main.css?v=6.4.2" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/alex.d-blog/images/logo-180x180.jpg?v=6.4.2"><link rel="icon" type="image/png" sizes="32x32" href="/alex.d-blog/images/favicon-32x32.ico?v=6.4.2"><link rel="icon" type="image/png" sizes="16x16" href="/alex.d-blog/images/favicon-16x16.ico?v=6.4.2"><link rel="mask-icon" href="/alex.d-blog/images/logo.svg?v=6.4.2" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/alex.d-blog/",scheme:"Mist",version:"6.4.2",sidebar:{position:"left",width:320,display:"hide",offset:12,b2t:!1,scrollpercent:!0,onmobile:!0},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="本文主要以百度首页为例，记录Chrome浏览器中，保存页面的多种方式（涉及一些Chrome的“小技巧”），涉及插件使用请自行尝试，本文仅对不使用插件的情况下保存页面的不同处理方法做简单介绍。"><meta name="keywords" content="Chrome,Windows"><meta property="og:type" content="article"><meta property="og:title" content="Windows小技巧 -- chrome下页面保存的多种姿势"><meta property="og:url" content="http://yoursite.com/posts/62e02099/index.html"><meta property="og:site_name" content="Alex.D&#39;s Bolg"><meta property="og:description" content="本文主要以百度首页为例，记录Chrome浏览器中，保存页面的多种方式（涉及一些Chrome的“小技巧”），涉及插件使用请自行尝试，本文仅对不使用插件的情况下保存页面的不同处理方法做简单介绍。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_files.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_flags.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_as_mhtml.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_save_mhtml.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/ie_save_mht.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/baidu_mht.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/print_viewer.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_as_pdf.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/faststone_capture_1.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/sublime_text_command_menu.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_command_menu.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_command_menu_capture.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/toggle_device_toolbar.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/device_capture.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_chrome_save_pdf.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_save_pdf_default.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_screenshot.png"><meta property="og:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_screenshot_default.png"><meta property="og:updated_time" content="2018-12-05T05:32:16.683Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Windows小技巧 -- chrome下页面保存的多种姿势"><meta name="twitter:description" content="本文主要以百度首页为例，记录Chrome浏览器中，保存页面的多种方式（涉及一些Chrome的“小技巧”），涉及插件使用请自行尝试，本文仅对不使用插件的情况下保存页面的不同处理方法做简单介绍。"><meta name="twitter:image" content="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_files.png"><link rel="alternate" href="/alex.d-blog/rss.xml" title="Alex.D's Bolg" type="application/atom+xml"><link rel="canonical" href="http://yoursite.com/posts/62e02099/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>Windows小技巧 -- chrome下页面保存的多种姿势 | Alex.D's Bolg</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3a07652f23a7df84dd82ef48b0a358e1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.logo-line-after i{right:initial}</style></noscript></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/alex.d-blog/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Alex.D's Bolg</span><span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Don't trouble trouble until trouble troubles you.</h1></div><div class="site-nav-toggle"> <button aria-label="切换导航栏"><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/alex.d-blog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/alex.d-blog/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>标签<span class="badge">46</span></a></li><li class="menu-item menu-item-categories"><a href="/alex.d-blog/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>分类<span class="badge">19</span></a></li><li class="menu-item menu-item-archives"><a href="/alex.d-blog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>归档<span class="badge">30</span></a></li><li class="menu-item menu-item-about"><a href="/alex.d-blog/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>关于</a></li><li class="menu-item menu-item-commonweal"><a href="/alex.d-blog/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header> <a href="https://github.com/anyer" class="github-corner" target="_blank" title="Follow me on GitHub" aria-label="Follow me on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#222;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://yoursite.com/alex.d-blog/posts/62e02099/"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="Alex.D"><meta itemprop="description" content="Alex.D 个人博客，记录和分享工作经验、学习心得等"><meta itemprop="image" content="/alex.d-blog/images/avatar.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Alex.D's Bolg"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">Windows小技巧 -- chrome下页面保存的多种姿势</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-12-05 13:28:00 / 修改时间：13:32:16" itemprop="dateCreated datePublished" datetime="2018-12-05T13:28:00+08:00">2018-12-05</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/alex.d-blog/categories/Windows小技巧/" itemprop="url" rel="index"><span itemprop="name">Windows小技巧</span></a></span></span> <span id="/alex.d-blog/posts/62e02099/" class="leancloud_visitors" data-flag-title="Windows小技巧 -- chrome下页面保存的多种姿势"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">本文字数：</span> <span title="本文字数">4.3k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">4 分钟</span></div><div class="post-description">本文主要以百度首页为例，记录Chrome浏览器中，保存页面的多种方式（涉及一些Chrome的“小技巧”），涉及插件使用请自行尝试，本文仅对不使用插件的情况下保存页面的不同处理方法做简单介绍。</div></div></header><div class="post-body" itemprop="articleBody"><p>本文主要以百度首页为例，记录Chrome浏览器中，保存页面的多种方式（涉及一些Chrome的“小技巧”），涉及插件使用请自行尝试，本文仅对不使用插件的情况下保存页面的不同处理方法做简单介绍。</p><p>系统环境：Windows10、Chrome 70.0.3538.110（正式版本） （64 位）.</p><h2 id="保存离线页面"><a href="#保存离线页面" class="headerlink" title="保存离线页面"></a>保存离线页面</h2><p>说到页面离线保存，首先想到的就是右键保存（<code>Ctrl + S</code>），这样的方式保存会把当前页面的资源保存下来，并放到一个目录下面，大致效果如下：</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_files.png" alt="离线保存页面"></p><p>在想要编辑页面源码等情况下，可以使用此方法，如果只想获取单个离线页面文件用来离线查看，则可以尝试保存当前页面为MHTML文档，可以使用插件（<code>Save As MHT</code> 、<code>Save As MHTML</code> 等） 或Chrome原生支持来完成此功能。</p><h3 id="Chrome浏览器保存MHTML格式页面"><a href="#Chrome浏览器保存MHTML格式页面" class="headerlink" title="Chrome浏览器保存MHTML格式页面"></a>Chrome浏览器保存MHTML格式页面</h3><p>很多浏览器（IE 5.0+、Opera 9.0+、Chrome等）都支持存储MHTML格式页面，大多不支持的浏览器，也有对应的插件可以处理。</p><p>在Chrome中，要保存MHTML格式页面，需要在Chrome的实验性功能设置中开启。</p><p>首先，在Chrome浏览器的地址栏输入 <code>chrome://flags</code> ，可以进入Chrome的实验性功能设置页面</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_flags.png" alt="Chrome flags"></p><p>在页面的搜索框内输入 <code>mhtml</code> ，找到 <code>Save Page as MHTML</code> 项（或直接在地址栏输入 <code>chrome://flags/#save-page-as-mhtml</code>），将该项设置为 <code>Enabled</code> ，然后点击底部提示中的 <code>RELAUNCH NOW</code> 按钮重启浏览器，使修改生效。</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_as_mhtml.png" alt="Save Page as MHTML"></p><p>重启浏览器后，在需要保存的页面中，右键，选择另存为（或快捷键 <code>Ctrl + S</code>），弹出的另存为窗口，保存类型选择 <code>网页（单个文件）</code></p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_save_mhtml.png" alt="Chrome保存MHTML格式页面"></p><h3 id="附：IE保存MHT格式页面"><a href="#附：IE保存MHT格式页面" class="headerlink" title="附：IE保存MHT格式页面"></a>附：IE保存MHT格式页面</h3><p>MHTML（<a href="https://zh.wikipedia.org/wiki/MHTML" target="_blank" rel="noopener">维基百科</a> | <a href="https://baike.baidu.com/item/MHTML" target="_blank" rel="noopener">百度百科</a>），网页归档，又称单一档案网页或网页封存档案，可以将一个多附件网页保存为单一文档，文档扩展名为 <code>.mht</code> 或 <code>.mhtml</code>。IE浏览器支持保存 <code>.mht</code> 文件，下面做简单介绍。</p><p>IE浏览器中打开需要保存的百度首页页面链接，然后右键保存（<code>Ctrl + S</code>），出现的保存窗口中，选择保存类型 <code>*.mht</code></p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/ie_save_mht.png" alt="IE保存mht格式页面"></p><p>此时可以看到一个百度的MHT文件，文本编辑器打开后，可以看到类似下面的代码：</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/baidu_mht.png" alt="百度 MHT离线文件"></p><p>这里可以看到MHTML文档是基于超文本标记语言的，里面可以看到经过处理的页面代码。</p><hr><h2 id="保存PDF页面"><a href="#保存PDF页面" class="headerlink" title="保存PDF页面"></a>保存PDF页面</h2><p>Chrome中PDF格式页面保存，可以通过 <a href="https://www.printfriendly.com/" target="_blank" rel="noopener">PrintFriendly &amp; PDF</a> (有Chrome插件）等在线处理服务或使用Chrome插件（Save As PDF）实现，也可以通过打印来实现。</p><h3 id="Chrome打印预览中保存页面PDF"><a href="#Chrome打印预览中保存页面PDF" class="headerlink" title="Chrome打印预览中保存页面PDF"></a>Chrome打印预览中保存页面PDF</h3><p>在想保存的页面中，快捷键 <code>Ctrl + P</code> （或右键菜单 -&gt; <code>打印(p)...</code>），打开页面的打印浏览界面</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/print_viewer.png" alt="页面打印预览"></p><p>此时可以看到站点的打印预览效果（默认黑白显示），在左侧选项中找到 <code>目标打印机</code> -&gt; <code>更改...</code> ，在弹出的选择界面中，找到 <code>另存为 PDF</code> ，双击即可</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/save_page_as_pdf.png" alt="页面打印预览"></p><p>此时就可以看到站点的彩色版预览效果，点击左侧的 <code>保存</code> 按钮即可将站点存储为PDF格式。</p><hr><h2 id="保存图片页面"><a href="#保存图片页面" class="headerlink" title="保存图片页面"></a>保存图片页面</h2><p>部分情况下，可能会需要截取页面，有时仅需要截取部分内容，这通过普通的截图工具即可完成，如QQ截取、微信截图、Windows自带截图工具等等；而有时可能需要截取页面长图，这也可以通过工具来实现，如FastStone Capture、Chrome插件（FireShot、Full Page Screen Capture）等。这里简单介绍 <code>FastStone Capture</code> 和Chrome截图方法，其他方式不赘述。</p><h3 id="截图工具实现图片页面保存"><a href="#截图工具实现图片页面保存" class="headerlink" title="截图工具实现图片页面保存"></a>截图工具实现图片页面保存</h3><p>打开工具 <a href="http://www.faststone.org/FSCaptureDetail.htm" target="_blank" rel="noopener">FastStone Capture</a> ，选择 <code>捕捉滚动窗口</code> 按钮，则可以进入长图截图窗口</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/faststone_capture_1.png" alt="FastStone Capture 截取页面长图"></p><p>FastStone Capture的捕捉滚动窗口，可以支持自动滚动窗口及自定义滚动窗口，可以根据需要选择，以达到截取所需内容的目的（自定义滚动截图不太好使，不容易把控结束时间，截取的图片可能需要再次编辑）</p><h3 id="Chrome浏览器命令行菜单实现图片页面保存"><a href="#Chrome浏览器命令行菜单实现图片页面保存" class="headerlink" title="Chrome浏览器命令行菜单实现图片页面保存"></a>Chrome浏览器命令行菜单实现图片页面保存</h3><p>在Chrome浏览器的开发者工具中（devtools），也提供了类似主流编辑器（Sublime Text, Atom, Visual Studio Code等）中的命令行菜单，通常使用 <code>Ctrl + Shift + P</code> ( Mac 上是 <code>Cmd + Shift + P</code>) 。如Sublime Text的命令行菜单：</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/sublime_text_command_menu.png" alt="Sublime Text 命令行菜单"></p><p>使用Sublime Text的朋友应该很熟悉这个了，而命令行菜单带来的遍历是不言而喻的。</p><p>在Chrome浏览器中，首先 <code>F12</code> 打开 <code>DevTools</code> 开发者工具，然后在DevTools中使用快捷键 <code>Ctrl + Shift + P</code> ，就可以打开Chrome的命令行菜单：</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_command_menu.png" alt="Chrome 命令行菜单"></p><p>在命令行菜单中，输入 <code>capture</code> 就可以看到有如下选项</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/chrome_command_menu_capture.png" alt="Chrome命令行菜单 Capture"></p><p>这里可以看到，Chrome命令行菜单提供了三个用于界面捕获的命令</p><ul><li>Capture full size screenshot - 截取整个站点（长图）</li><li>Capture node screenshot - 截取选择的DOM节点</li><li>Capture screenshot - 截取视图窗口显示的部分</li></ul><p>在命令行内输入对应的命令，即可完成截图。</p><h3 id="附：Chrome浏览器站点移动端视图截图"><a href="#附：Chrome浏览器站点移动端视图截图" class="headerlink" title="附：Chrome浏览器站点移动端视图截图"></a>附：Chrome浏览器站点移动端视图截图</h3><p>上面介绍了截取站点方法，这里额外说下，想截取站点在不同像素显示下响应显示时，截取类似移动端长图的方法。</p><p>同样在Chrome浏览器中，打开DevTools，然后点击按钮，点击 <code>toggle device toolbar（切换设备工具栏）</code> ，可以看到类似如下效果：</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/toggle_device_toolbar.png" alt="打开切换设备工具栏"></p><p>在这个工具栏中，可以通过切换不同的设备（不同的分辨率），来查看站点在不同的分辨率下的显示情况，可以很好的辅助站点的响应式开发工作。在这个视图中，可以通过点击顶部菜单项最右边的三个点，来打开菜单，里面有截取屏幕的选项，如下：</p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/device_capture.png" alt="移动端视图截图"></p><hr><h2 id="Headless-Chrome模式完成页面截图及转存PDF"><a href="#Headless-Chrome模式完成页面截图及转存PDF" class="headerlink" title="Headless Chrome模式完成页面截图及转存PDF"></a>Headless Chrome模式完成页面截图及转存PDF</h2><blockquote><p><a href="https://chromium.googlesource.com/chromium/src/+/lkgr/headless/README.md" target="_blank" rel="noopener">Headless Chrome</a> is shipping in Chrome 59. It’s a way to run the Chrome browser in a headless environment. Essentially, running Chrome without chrome! It brings <strong>all modern web platform features</strong> provided by Chromium and the Blink rendering engine to the command line.</p></blockquote><p>Chrome 59以上版本支持Headless Chrome，Headless Chrome是可以命令行模式运行Chromium和Blink渲染引擎提供功能。可以在无UI窗口的情况下，完成很多浏览器的操作，是自动测试和服务器环境的绝佳工具。更多内容参看<a href="https://developers.google.com/web/updates/2017/04/headless-chrome" target="_blank" rel="noopener">官方说明</a>。</p><h3 id="Headless-Chrome-保存页面"><a href="#Headless-Chrome-保存页面" class="headerlink" title="Headless Chrome 保存页面"></a>Headless Chrome 保存页面</h3><p>管理员模式运行命令行窗口，使用 <code>cd</code> 命令进入Chrome浏览器安装目录，输入类似如下命令：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome --headless --disable-gpu --dump-dom https://www.baidu.com</span><br></pre></td></tr></table></figure><p>测试了下，好像没有效果，具体原因不清楚。。。有知道的朋友，希望可以不吝赐教！！！</p><h3 id="Headless-Chrome-保存页面PDF"><a href="#Headless-Chrome-保存页面PDF" class="headerlink" title="Headless Chrome 保存页面PDF"></a>Headless Chrome 保存页面PDF</h3><p>管理员模式运行命令行窗口，使用 <code>cd</code> 命令进入Chrome浏览器安装目录，输入类似如下命令：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chrome --headless --disable-gpu --<span class="built_in">print</span>-to-pdf='存储路径\文件名称' https://www.baidu.com</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_chrome_save_pdf.png" alt="Headless Chrome 保存页面PDF"></p><p><strong>注意</strong>，此处如果不给存储路径和文件名称，则保存的pdf可以在Chrome浏览器安装目录下对应版本号的目录文件下，文件名称为 <code>output.pdf</code></p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_save_pdf_default.png" alt="Headless Chrome保存PDF默认存储位置及名称"></p><h3 id="Headless-Chrome-页面截图"><a href="#Headless-Chrome-页面截图" class="headerlink" title="Headless Chrome 页面截图"></a>Headless Chrome 页面截图</h3><p>管理员模式运行命令行窗口，使用 <code>cd</code> 命令进入Chrome浏览器安装目录，输入类似如下命令：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chrome --headless --disable-gpu --screenshot='存储路径\文件名称' https://www.baidu.com</span><br><span class="line"></span><br><span class="line">## 设置图片大小(尺寸大小好像没有用，具体作用自行研究)</span><br><span class="line">chrome --headless --disable-gpu --screenshot='存储路径\文件名称' --window-size=宽,高 https://www.baidu.com</span><br></pre></td></tr></table></figure><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_screenshot.png" alt="Headless Chrome保存页面截图默认存储位置及名称"></p><p><strong>注意</strong>，此处如果不给存储路径和文件名称，则保存的pdf可以在Chrome浏览器安装目录下对应版本号的目录文件下，文件名称为 <code>output.pdf</code></p><p><img src="https://gitee.com/alex_d/Graph-bed/raw/master/2018/1204/headless_screenshot_default.png" alt="Headless Chrome保存页面截图默认存储位置及名称"></p><h3 id="Puppeteer"><a href="#Puppeteer" class="headerlink" title="Puppeteer"></a>Puppeteer</h3><p>Chrome官方推出的Puppeteer（封装了Headless Chrome的Node库），可以完成浏览器中手动执行的大多数操作：</p><ul><li>生成页面的屏幕截图和PDF。</li><li>抓取SPA（单页面应用程序）并生成预渲染内容（即“SSR”（服务器端渲染））。</li><li>自动化表单提交，UI测试，键盘输入等。</li><li>创建最新的自动化测试环境。使用最新的JavaScript和浏览器功能直接在最新版本的Chrome中运行测试。</li><li>捕获站点的<a href="https://developers.google.com/web/tools/chrome-devtools/evaluate-performance/reference" target="_blank" rel="noopener">时间线跟踪</a>，以帮助诊断性能问题。</li><li><p>测试Chrome扩展程序。</p><p>该库具体功能详见 <a href="https://developers.google.com/web/tools/puppeteer/" target="_blank" rel="noopener">此处</a> | <a href="https://github.com/GoogleChrome/puppeteer" target="_blank" rel="noopener">Github地址</a>。</p></li></ul><blockquote><p> 类似的还可以尝试<a href="http://phantomjs.org/" target="_blank" rel="noopener">PhantomJS</a> – 可编写脚本的无头浏览器</p></blockquote><hr><h2 id="阅读参考"><a href="#阅读参考" class="headerlink" title="阅读参考"></a>阅读参考</h2><ul><li><a href="https://loveky.github.io/2017/06/06/chrome-devtools-command-menu/" target="_blank" rel="noopener">Chrome 开发者工具中的命令菜单</a></li><li><a href="https://developers.google.com/web/updates/2016/04/devtools-digest-command-menu" target="_blank" rel="noopener">DevTools Digest: More Power with the New Command Menu – Google developers</a></li><li><a href="https://umaar.com/dev-tips/98-command-menu/" target="_blank" rel="noopener">Chrome DevTools: Use the Command Menu to access almost everything in DevTools in a few keystrokes</a></li><li><a href="https://en.wikipedia.org/wiki/Headless_software" target="_blank" rel="noopener">Headless_software – 维基百科</a></li><li><a href="https://github.com/prisma-archive/chromeless" target="_blank" rel="noopener">chromeless(已停止维护，推荐使用Puppeteer)</a></li><li><a href="https://blog.csdn.net/hochenchong/article/details/80357504" target="_blank" rel="noopener">使用 Chrome Headless 模式将 HTML 转 PDF</a></li><li><a href="https://peter.sh/experiments/chromium-command-line-switches/" target="_blank" rel="noopener">Chromium命令行开关列表</a></li></ul></div><div><div><div style="text-align:center;color:#ccc;font-size:16px">------ 全文结束<i class="fa fa-thumbs-up"></i> 感谢您的阅读!!! ------</div></div></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"> <img id="wechat_subscriber_qcode" src="/alex.d-blog/images/weixingongzhonghao.png" alt="Alex.D wechat" style="width:200px;max-width:100%"><div></div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/alex.d-blog/images/wechatpay.jpg" alt="Alex.D 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/alex.d-blog/images/alipay.jpg" alt="Alex.D 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> Alex.D</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="http://yoursite.com/posts/62e02099/" title="Windows小技巧 -- chrome下页面保存的多种姿势">http://yoursite.com/posts/62e02099/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/alex.d-blog/tags/Chrome/" rel="tag"><i class="fa fa-tag"></i> Chrome</a><a href="/alex.d-blog/tags/Windows/" rel="tag"><i class="fa fa-tag"></i> Windows</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/alex.d-blog/posts/ca0ce790/" rel="next" title="Windows小技巧 -- 已连接wifi密码查看"><i class="fa fa-chevron-left"></i> Windows小技巧 -- 已连接wifi密码查看</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/alex.d-blog/posts/736330a0/" rel="prev" title="Python学习笔记 - 函数式编程之高阶函数">Python学习笔记 - 函数式编程之高阶函数<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap"> 站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/alex.d-blog/images/avatar.jpg" alt="Alex.D"><p class="site-author-name" itemprop="name">Alex.D</p><p class="site-description motion-element" itemprop="description">Alex.D 个人博客，记录和分享工作经验、学习心得等</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/alex.d-blog/archives/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/alex.d-blog/categories/index.html"><span class="site-state-item-count">19</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/alex.d-blog/tags/index.html"><span class="site-state-item-count">46</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/alex.d-blog/rss.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://blog.csdn.net/u012995964" target="_blank" title="CSDN" rel="external nofollow"><i class="fa fa-fw fa-link"></i> CSDN</a></span><span class="links-of-author-item"><a href="https://www.jianshu.com/u/059f6f3e5791" target="_blank" title="简书" rel="external nofollow"><i class="fa fa-fw fa-link"></i> 简书</a></span><span class="links-of-author-item"><a href="https://github.com/anyer" target="_blank" title="GitHub" rel="external nofollow"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://gitee.com/alex_d" target="_blank" title="Gitee" rel="external nofollow"><i class="fa fa-fw fa-link"></i> Gitee</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank" rel="external nofollow"><img src="/alex.d-blog/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#保存离线页面"><span class="nav-number">1.</span> <span class="nav-text">保存离线页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Chrome浏览器保存MHTML格式页面"><span class="nav-number">1.1.</span> <span class="nav-text">Chrome浏览器保存MHTML格式页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#附：IE保存MHT格式页面"><span class="nav-number">1.2.</span> <span class="nav-text">附：IE保存MHT格式页面</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#保存PDF页面"><span class="nav-number">2.</span> <span class="nav-text">保存PDF页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Chrome打印预览中保存页面PDF"><span class="nav-number">2.1.</span> <span class="nav-text">Chrome打印预览中保存页面PDF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#保存图片页面"><span class="nav-number">3.</span> <span class="nav-text">保存图片页面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#截图工具实现图片页面保存"><span class="nav-number">3.1.</span> <span class="nav-text">截图工具实现图片页面保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Chrome浏览器命令行菜单实现图片页面保存"><span class="nav-number">3.2.</span> <span class="nav-text">Chrome浏览器命令行菜单实现图片页面保存</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#附：Chrome浏览器站点移动端视图截图"><span class="nav-number">3.3.</span> <span class="nav-text">附：Chrome浏览器站点移动端视图截图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Headless-Chrome模式完成页面截图及转存PDF"><span class="nav-number">4.</span> <span class="nav-text">Headless Chrome模式完成页面截图及转存PDF</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Headless-Chrome-保存页面"><span class="nav-number">4.1.</span> <span class="nav-text">Headless Chrome 保存页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Headless-Chrome-保存页面PDF"><span class="nav-number">4.2.</span> <span class="nav-text">Headless Chrome 保存页面PDF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Headless-Chrome-页面截图"><span class="nav-number">4.3.</span> <span class="nav-text">Headless Chrome 页面截图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Puppeteer"><span class="nav-number">4.4.</span> <span class="nav-text">Puppeteer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#阅读参考"><span class="nav-number">5.</span> <span class="nav-text">阅读参考</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2018</span><span class="with-love" id="animate"><i class="fa fa-heartbeat"></i></span> <span class="author" itemprop="copyrightHolder">Alex.D</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">95k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:27</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" rel="external nofollow" href="https://hexo.io">Hexo</a> 强力驱动 v3.8.0</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 – <a class="theme-link" target="_blank" rel="external nofollow" href="https://theme-next.org">NexT.Mist</a> v6.4.2</div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv" title="总访客量"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv" title="总访问量"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div><div><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5b1f1cb368ef81fb" async="async"></script></div></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/velocity/1.2.1/velocity.ui.min.js"></script><script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/canvas-nest.js/1.0.1/canvas-nest.min.js"></script><script type="text/javascript" src="/alex.d-blog/lib/three/three.min.js"></script><script type="text/javascript" src="/alex.d-blog/lib/three/three-waves.min.js"></script><script type="text/javascript" src="/alex.d-blog/js/src/utils.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/motion.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/scrollspy.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/post-details.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/bootstrap.js?v=6.4.2"></script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/alex.d-blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script>
    
    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url }) })
        .done(function ({ results }) {
          if (results.length > 0) {
            var counter = results[0];
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text(counter.time + 1);
            
            Counter('put', `/classes/Counter/${counter.objectId}`, JSON.stringify({ time: { "__op":"Increment", "amount":1 } }))
            
            .fail(function ({ responseJSON }) {
                console.log('Failed to save Visitor num, with error message: ' + responseJSON.error);
            })
          } else {
            
              var $element = $(document.getElementById(url));
              $element.find('.leancloud-visitors-count').text('Counter not initialized! See more at console err msg.');
              console.error('ATTENTION! LeanCloud counter has security bug, see here how to solve it: https://github.com/theme-next/hexo-leancloud-counter-security. \n But you also can use LeanCloud without security, by set \'security\' option to \'false\'.');
            
          }
        })
      .fail(function ({ responseJSON }) {
        console.log('LeanCloud Counter Error:' + responseJSON.code + " " + responseJSON.error);
      });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + "bMq5EYdO7g53KqEdWTWkVm7I-gzGzoHsz")
        .done(function ({ api_server }) {
          var Counter = function (method, url, data) {
            return $.ajax({
              method: method,
              url: `https://${api_server}/1.1${url}`,
              headers: {
                'X-LC-Id': "bMq5EYdO7g53KqEdWTWkVm7I-gzGzoHsz",
                'X-LC-Key': "BVg4Pry8PJsDq6i9g8Iydm5M",
                'Content-Type': 'application/json',
              },
              data: data,
            });
          };
          
          addCount(Counter);
          
        })
    });
  </script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script type="text/javascript" src="/alex.d-blog/js/src/js.cookie.js?v=6.4.2"></script><script type="text/javascript" src="/alex.d-blog/js/src/scroll-cookie.js?v=6.4.2"></script><style>.copy-btn{display:inline-block;padding:6px 12px;font-size:13px;font-weight:700;line-height:20px;color:#333;white-space:nowrap;vertical-align:middle;cursor:pointer;background-color:#eee;background-image:linear-gradient(#fcfcfc,#eee);border:1px solid #d5d5d5;border-radius:3px;user-select:none;outline:0}.highlight-wrap .copy-btn{transition:opacity .3s ease-in-out;opacity:0;padding:2px 6px;position:absolute;right:4px;top:8px}.highlight-wrap .copy-btn:focus,.highlight-wrap:hover .copy-btn{opacity:1}.highlight-wrap{position:relative}</style><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("复制").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea");document.body.appendChild(n),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.value=e,n.select(),n.focus();var o=document.execCommand("copy");document.body.removeChild(n),o?$(this).text("复制成功"):$(this).text("复制失败"),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("复制")},300)}).append(e)})</script><script type="text/javascript" src="/alex.d-blog/js/src/love.js"></script></body></html>